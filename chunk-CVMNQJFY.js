import{a as F}from"./chunk-O54LDZM6.js";import{a as T}from"./chunk-TWEDPNPY.js";import{a as b}from"./chunk-BDTP3XYN.js";import{a as N}from"./chunk-PKOGN4VO.js";import{a as ve}from"./chunk-GJZEQUDA.js";import{a as Ee,c as ge}from"./chunk-K4MEQIZ7.js";import{$ as re,A as f,C as w,Ca as ye,D as x,Da as P,E as R,Ga as ue,Ha as fe,Ia as q,J as te,K as I,Ka as _e,L as j,N as C,Na as he,Oa as H,Pa as U,V as g,W as k,X as oe,Y as ie,Z as O,_ as ne,aa as le,ba as me,ca as S,da as ae,f as Y,g as Z,i as a,j as y,ja as M,k as E,ka as pe,l as _,la as L,m as c,ma as W,na as B,oa as V,pa as de,q as r,qa as z,r as l,s as h,sa as se,t as $,ta as ce,u,ua as A,v,w as K,wa as G,x as ee,y as p}from"./chunk-BR66K6D3.js";import"./chunk-IPXLKNFD.js";import"./chunk-7KGURMOZ.js";import"./chunk-ZYUIEBGB.js";import"./chunk-5Z6BILBO.js";import"./chunk-ETSLECS3.js";import"./chunk-HII7ZFLR.js";import"./chunk-7JVEMCNU.js";import"./chunk-Z65EUC5N.js";import"./chunk-4U6PRYVA.js";import"./chunk-C3VUKG7J.js";import"./chunk-JWIEPCRG.js";import"./chunk-QPVVTFFW.js";import"./chunk-J6ICYO4L.js";import"./chunk-LF5XB4YN.js";import{a as D,b as X,f as J}from"./chunk-RW4GY4BD.js";function xe(n,i){if(n&1&&(r(0,"ion-select-option",10),p(1),l()),n&2){let d=i.$implicit;c("value",d.departmentId),a(),f(" ",d.departmentName," ")}}function Re(n,i){if(n&1&&(r(0,"ion-select-option",10),p(1),l()),n&2){let d=i.$implicit;c("value",d.roleId),a(),f(" ",d.roleName," ")}}function Oe(n,i){if(n&1&&(r(0,"div")(1,"ion-select",11)(2,"div",4),p(3,"Role"),l(),_(4,Re,2,2,"ion-select-option",5),l()()),n&2){let d=v();a(4),c("ngForOf",d.roles)}}var be=(()=>{let i=class i{constructor(t,e,o,s){this._employeeService=t,this._departmentService=e,this._roleService=o,this._toastService=s,this.departments=[],this.roles=[],this.employeeForm=new ie({name:new O("",[g.required,g.minLength(2),g.maxLength(100)]),salary:new O(0,[g.min(0),g.required]),departmentId:new O(-1,g.required),roleId:new O(null,g.required)})}ngOnInit(){this.departments=this._departmentService.getDepartments(),this.capitalizeEmployeeName()}departmentSelectionChange(t){this.getRolesFromDepartmentId(t.detail.value)}getRolesFromDepartmentId(t){this.roles=this._roleService.getRolesFromDepartmentId(t)}onSubmit(){if(this.employeeForm.valid){let t=X(D({},this.employeeForm.value),{departmentId:Number(this.employeeForm.value.departmentId),roleId:Number(this.employeeForm.value.roleId)});this._employeeService.addEmployee(t),this.employeeForm.reset(),this._employeeService.notifyEmployeesChanged(),this._toastService.presentSuccessToast("Employee created.")}else this._toastService.presentErrorToast("Employee failed to be created.")}capitalizeEmployeeName(){var t;(t=this.employeeForm.get("name"))==null||t.valueChanges.subscribe(e=>{var o;e&&((o=this.employeeForm.get("name"))==null||o.setValue(e.toUpperCase(),{emitEvent:!1}))})}};i.\u0275fac=function(e){return new(e||i)(y(F),y(T),y(b),y(N))},i.\u0275cmp=E({type:i,selectors:[["app-employee-create"]],decls:15,vars:4,consts:[[1,"ion-card"],[1,"ion-text-center"],[3,"ngSubmit","formGroup"],["id","departmentId","formControlName","departmentId","placeholder","Select a Department",3,"ionChange"],["slot","label"],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],["id","employeeSalary","type","number","label","Salary: ","formControlName","salary","placeholder","Enter Employee Salary"],["id","employeeName","label","Employee Name: ","formControlName","name","placeholder","Enter Employee Name"],["expand","block","type","submit",3,"click","disabled"],[3,"value"],["id","roleId","formControlName","roleId","placeholder","Select a Role"]],template:function(e,o){e&1&&(r(0,"ion-card",0)(1,"ion-card-header",1)(2,"ion-card-title"),p(3," Add New Employee "),l()(),r(4,"ion-card-content")(5,"form",2),u("ngSubmit",function(){return o.onSubmit()}),r(6,"ion-select",3),u("ionChange",function(m){return o.departmentSelectionChange(m)}),r(7,"div",4),p(8,"Department: "),l(),_(9,xe,2,2,"ion-select-option",5),l(),_(10,Oe,5,1,"div",6),h(11,"ion-input",7)(12,"ion-input",8),r(13,"ion-button",9),u("click",function(){return o.onSubmit()}),p(14," Add Employee "),l()()()()),e&2&&(a(5),c("formGroup",o.employeeForm),a(4),c("ngForOf",o.departments),a(),c("ngIf",o.employeeForm.get("departmentId").value!==-1),a(3),c("disabled",o.employeeForm.invalid))},dependencies:[C,I,j,S,re,k,oe,ae,le,me,L,B,V,W,H,M,U,P],encapsulation:2});let n=i;return n})();function ke(n,i){if(n&1&&(r(0,"ion-select-option",11),p(1),l()),n&2){let d=i.$implicit;c("value",d.departmentId),a(),f(" ",d.departmentName," ")}}function Le(n,i){if(n&1&&(r(0,"ion-select-option",11),p(1),l()),n&2){let d=i.$implicit;c("value",d.roleId),a(),f(" ",d.roleName," ")}}var Ne=(()=>{let i=class i{constructor(t,e,o,s,m){this.modalCtrl=t,this._employeeService=e,this._departmentService=o,this._roleService=s,this._toastService=m,this.employeeId=-1,this.originalEmployee={employeeId:-1,name:"",salary:-1,departmentId:-1,roleId:-1},this.editedEmployee={employeeId:-1,name:"",salary:-1,departmentId:-1,roleId:-1},this.departments=[],this.filteredRoles=[]}ngOnInit(){this.getEmployee(),this.departments=this._departmentService.getDepartments(),this.filteredRoles=this._roleService.getRolesFromDepartmentId(this.originalEmployee.departmentId)}getEmployee(){let t=this._employeeService.getEmployee(this.employeeId);if(!t){console.error("Employee not found"),this.modalCtrl.dismiss(null,"error");return}this.originalEmployee=D({},t),this.editedEmployee=D({},t)}changeFilteredRoles(t){this.filteredRoles=this._roleService.getRolesFromDepartmentId(this.editedEmployee.departmentId)}cancel(){return this.modalCtrl.dismiss(null,"cancel")}confirm(){return this.saveChanges(),this.modalCtrl.dismiss(this.employeeId,"confirm")}saveChanges(){this._employeeService.updateEmployee(this.editedEmployee),this._employeeService.notifyEmployeesChanged(),this._toastService.presentSuccessToast("Employee saved.")}onEmployeeNameInput(t){let e=t.target;e!=null&&e.value&&(this.editedEmployee.name=e.value.toUpperCase())}};i.\u0275fac=function(e){return new(e||i)(y(q),y(F),y(T),y(b),y(N))},i.\u0275cmp=E({type:i,selectors:[["app-employee-edit-modal"]],inputs:{employeeId:"employeeId"},decls:27,vars:9,consts:[["slot","start"],["color","medium",3,"click"],["slot","end"],[3,"click","strong"],[1,"ion-padding"],["label","Employee Name:",3,"ionInput","ngModelChange","value","ngModel"],["placeholder","Select a Department",3,"ionChange","ngModelChange","ngModel"],["slot","label"],[3,"value",4,"ngFor","ngForOf"],["placeholder","Select a Role",3,"ngModelChange","ngModel"],["type","number","label","Salary:",3,"ngModelChange","value","ngModel"],[3,"value"]],template:function(e,o){e&1&&(r(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",0)(3,"ion-button",1),u("click",function(){return o.cancel()}),p(4,"Cancel"),l()(),r(5,"ion-title"),p(6,"Edit Employee"),l(),r(7,"ion-buttons",2)(8,"ion-button",3),u("click",function(){return o.confirm()}),p(9,"Confirm"),l()()()(),r(10,"ion-content",4)(11,"ion-list")(12,"ion-item")(13,"ion-input",5),u("ionInput",function(m){return o.onEmployeeNameInput(m)}),R("ngModelChange",function(m){return x(o.editedEmployee.name,m)||(o.editedEmployee.name=m),m}),l()(),r(14,"ion-item")(15,"ion-select",6),u("ionChange",function(m){return o.changeFilteredRoles(m)}),R("ngModelChange",function(m){return x(o.editedEmployee.departmentId,m)||(o.editedEmployee.departmentId=m),m}),p(16," > "),r(17,"div",7),p(18,"Department"),l(),_(19,ke,2,2,"ion-select-option",8),l()(),r(20,"ion-item")(21,"ion-select",9),R("ngModelChange",function(m){return x(o.editedEmployee.roleId,m)||(o.editedEmployee.roleId=m),m}),r(22,"div",7),p(23,"Role"),l(),_(24,Le,2,2,"ion-select-option",8),l()(),r(25,"ion-item")(26,"ion-input",10),R("ngModelChange",function(m){return x(o.editedEmployee.salary,m)||(o.editedEmployee.salary=m),m}),l()()()()),e&2&&(a(8),c("strong",!0),a(5),K("value",o.editedEmployee.name),w("ngModel",o.editedEmployee.name),a(2),w("ngModel",o.editedEmployee.departmentId),a(4),c("ngForOf",o.departments),a(2),w("ngModel",o.editedEmployee.roleId),a(3),c("ngForOf",o.filteredRoles),a(2),K("value",o.editedEmployee.salary),w("ngModel",o.editedEmployee.salary))},dependencies:[C,I,S,k,ne,M,pe,z,ce,G,A,ue,fe,H,U,P],encapsulation:2});let n=i;return n})();function We(n,i){if(n&1){let d=$();r(0,"ion-item")(1,"ion-grid")(2,"ion-row")(3,"ion-col",5),p(4),h(5,"br"),p(6),l(),r(7,"ion-col",6),p(8),h(9,"br"),p(10),l(),r(11,"ion-col",7)(12,"ion-button",8),u("click",function(){let e=Y(d).$implicit,o=v(2);return Z(o.presentEmployeeActionSheet(e))}),h(13,"ion-icon",9),l()()()()()}if(n&2){let d=i.$implicit,t=v(2);a(4),f(" ",d.name," "),a(2),f(" Salary: $",d.salary," "),a(2),f(" Dpt: ",t.getRoleName(d.roleId)," "),a(2),f(" Role: ",t.getDepartmentName(d.departmentId)," ")}}function Be(n,i){if(n&1&&(r(0,"ion-list"),_(1,We,14,4,"ion-item",4),l()),n&2){let d=v();a(),c("ngForOf",d.employees)}}function Ve(n,i){n&1&&p(0," No Employees ")}var Te=(()=>{let i=class i{constructor(t,e,o,s,m,De){this._employeeService=t,this._departmentService=e,this._roleService=o,this.actionSheetCtrl=s,this.modalCtrl=m,this._toastService=De,this.employees=[],Ee({ellipsisVerticalSharp:ge})}ngOnInit(){this.loadEmployees()}loadEmployees(){this.employees=this._employeeService.getEmployees()}getDepartmentName(t){var e;return(e=this._departmentService.getDepartment(t))==null?void 0:e.departmentName}getRoleName(t){var e;return(e=this._roleService.getRole(t))==null?void 0:e.roleName}presentEmployeeActionSheet(t){return J(this,null,function*(){yield(yield this.actionSheetCtrl.create({header:t.name,buttons:[{text:"Edit",handler:()=>this.openEmployeeEditModal(t.employeeId)},{text:"Delete",role:"destructive",handler:()=>this.onDelete(t.employeeId)},{text:"Cancel",role:"cancel",data:{action:"cancel"}}]})).present()})}openEmployeeEditModal(t){return J(this,null,function*(){let e=yield this.modalCtrl.create({component:Ne,componentProps:{employeeId:t}});e.present();let{data:o,role:s}=yield e.onWillDismiss();s==="confirm"&&(this.loadEmployees(),console.log(o,s))})}onDelete(t){confirm("Are you sure you want to delete this employee?")&&(this._employeeService.deleteEmployee(t),this.loadEmployees(),this._toastService.presentSuccessToast("Employee deleted."))}};i.\u0275fac=function(e){return new(e||i)(y(F),y(T),y(b),y(_e),y(q),y(N))},i.\u0275cmp=E({type:i,selectors:[["app-employee-list"]],decls:8,vars:2,consts:[["noEmployeesBlock",""],[1,"ion-card"],[1,"ion-text-center"],[4,"ngIf","ngIfElse"],[4,"ngFor","ngForOf"],["size","4",1,"ion-align-self-center"],["size","6",1,"ion-align-self-center"],["size","2"],["fill","clear","size","small",3,"click"],["slot","icon-only","name","ellipsis-vertical-sharp"]],template:function(e,o){if(e&1&&(r(0,"ion-card",1)(1,"ion-card-header",2)(2,"ion-card-title"),p(3," Employee List "),l()(),r(4,"ion-card-content"),_(5,Be,2,1,"ion-list",3)(6,Ve,1,0,"ng-template",null,0,te),l()()),e&2){let s=ee(7);a(5),c("ngIf",o.employees.length>0)("ngIfElse",s)}},dependencies:[C,I,j,S,L,B,V,W,G,A,M,he,se,ye,de],styles:["ion-col[_ngcontent-%COMP%]{font-size:10px}"]});let n=i;return n})();var at=(()=>{let i=class i{constructor(){}};i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=E({type:i,selectors:[["app-employees"]],decls:4,vars:1,consts:[[3,"title"],[1,"ion-padding"]],template:function(e,o){e&1&&(h(0,"app-sidemenu",0),r(1,"ion-content",1),h(2,"app-employee-create")(3,"app-employee-list"),l()),e&2&&c("title","Employees")},dependencies:[ve,z,be,Te],encapsulation:2});let n=i;return n})();export{at as EmployeesComponent};
